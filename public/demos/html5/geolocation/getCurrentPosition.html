<!DOCTYPE html>
<html>
  <head>
    <style>
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #myCanvas {
          border: 1px solid #9C9898;
      }
    </style>

    <script src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script>
        jQuery(window).ready(function(){
          jQuery("#findLocationBtn").click(initiate_geolocation);
        });

        function initialize() {
          var latlng = new google.maps.LatLng(-34.397, 150.644);
          var myOptions = {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map_canvas"),
              myOptions);
        }

        
        function initiate_geolocation() {
            navigator.geolocation.getCurrentPosition(handle_geolocation_query,handle_errors);
        }

        function handle_errors(error)
        {
            switch(error.code)
            {
                case error.PERMISSION_DENIED: alert("user did not share geolocation data");
                break;

                case error.POSITION_UNAVAILABLE: alert("could not detect current position");
                break;

                case error.TIMEOUT: alert("retrieving position timed out");
                break;

                default: alert("unknown error");
                break;
            }
        }
            function loadCanvas(dataURL){
                var canvas = document.getElementById("myCanvas");
                var context = canvas.getContext("2d");
                
                // load image from data url
                var imageObj = new Image();
                imageObj.onload = function(){
                    context.drawImage(this, 0, 0);
                };
                
                imageObj.src = dateURL;
            }
        function handle_geolocation_query(position)
        {
            var google_tile = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + position.coords.latitude + "," +
                            position.coords.longitude + "&zoom=14&size=300x400&markers=color:blue|label:S|" +
                            position.coords.latitude + ',' + position.coords.longitude;
            //alert(google_tile);
            jQuery("#googleMap").remove();
            jQuery(document.body).append(
                jQuery(document.createElement("img")).attr("src", google_tile).attr('id','googleMap')
            );
            //loadCanvas(google_tile);
        }
    </script>
  </head>
  <body onload="initialize()">
    <div>
      <div>
        <button id="findLocationBtn" >Draw My Location on Google Map</button>
      </div>
      <!--<canvas id="myCanvas" width="578" height="200"></canvas>-->
      <div id="googleMap" style="width: 50%; height: 50%"></div>
    </div>
  </body>
</html>
